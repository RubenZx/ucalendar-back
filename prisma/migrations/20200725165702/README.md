# Migration `20200725165702`

This migration has been generated by RubenZx at 7/25/2020, 4:57:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `ucalendar`.`SubjectGroup` (
`groupId` int NOT NULL ,
`subjectId` int NOT NULL ,
    PRIMARY KEY (`groupId`,`subjectId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `ucalendar`.`SubjectGroup` ADD FOREIGN KEY (`groupId`) REFERENCES `ucalendar`.`Group`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `ucalendar`.`SubjectGroup` ADD FOREIGN KEY (`subjectId`) REFERENCES `ucalendar`.`Subject`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200725130135..20200725165702
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 enum Role {
   ALUMN
@@ -38,16 +38,18 @@
 model Group {
   id            Int             @default(autoincrement()) @id
   name          String          @unique
-  TimeTableItem TimeTableItem[]
+  subjects      SubjectGroup[]
+  timeTableItem TimeTableItem[]
 }
 model Subject {
   id            Int             @id
   name          String
   abrev         String
   degrees       DegreeSubject[]
+  groups        SubjectGroup[]
   timeTableItem TimeTableItem[]
 }
 model TimeTableItem {
@@ -68,8 +70,16 @@
   subjectId    Int
   @@unique([classRoom, dayOfTheWeek, startHour, endHour], name: "classRoom")
 }
+model SubjectGroup {
+  group     Group   @relation(fields: [groupId], references: [id])
+  groupId   Int
+  subject   Subject @relation(fields: [subjectId], references: [id])
+  subjectId Int
+  @@id([groupId, subjectId])
+}
+
 model DegreeSubject {
   degree    Degree  @relation(fields: [degreeId], references: [id])
   degreeId  Int
   subject   Subject @relation(fields: [subjectId], references: [id])
```



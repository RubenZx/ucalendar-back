# Migration `20201012153152`

This migration has been generated by RubenZx at 10/12/2020, 5:31:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `Message` ADD FOREIGN KEY (`parentId`) REFERENCES `ucalendar`.`Message`(`id`) ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201012151841..20201012153152
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 enum Role {
   ALUMN
@@ -25,16 +25,18 @@
   messagesSent     Message[]            @relation("sentTo")
 }
 model Message {
-  id          Int      @id @default(autoincrement())
-  parentId    Int?
-  content     String
-  sentDate    DateTime @default(now())
-  sentTo      User     @relation(fields: [sentToUid], references: [uid], name: "sentTo")
-  sentToUid   String
-  sentFrom    User     @relation(fields: [sentFromUid], references: [uid], name: "sentFrom")
-  sentFromUid String
+  id            Int       @id @default(autoincrement())
+  content       String
+  sentDate      DateTime  @default(now())
+  parentMessage Message?  @relation(fields: [parentId], references: [id], name: "parent")
+  parentId      Int?
+  sentTo        User      @relation(fields: [sentToUid], references: [uid], name: "sentTo")
+  sentToUid     String
+  sentFrom      User      @relation(fields: [sentFromUid], references: [uid], name: "sentFrom")
+  sentFromUid   String
+  Message       Message[] @relation("parent")
 }
 model Degree {
   id       Int             @id
```



# Migration `20200722201351`

This migration has been generated by RubenZx at 7/22/2020, 8:13:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `ucalendar`.`Group` (
`id` int NOT NULL  AUTO_INCREMENT,
`name` varchar(191) NOT NULL  ,
`timeTableItemId` int  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `ucalendar`.`TimeTableItem` DROP COLUMN `group`;

CREATE UNIQUE INDEX `Group_timeTableItemId` ON `ucalendar`.`Group`(`timeTableItemId`)

ALTER TABLE `ucalendar`.`Group` ADD FOREIGN KEY (`timeTableItemId`) REFERENCES `ucalendar`.`TimeTableItem`(`id`) ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200722200402..20200722201351
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 enum Role {
   ALUMN
@@ -53,9 +53,9 @@
   type         String
   dayOfTheWeek Int
   colorBgc     String
   colorAbrev   String
-  group        String
+  group        Group
   weeks        Json
   users        UserTimeTableItem[]
   timetables   TimeTableSubject[]
   subject      Subject             @relation(fields: [subjectId], references: [id])
@@ -86,15 +86,14 @@
   timeTableItemId Int
   @@id([timeTableId, timeTableItemId])
 }
-// model Group {
-//   id              Int           @default(autoincrement()) @id
-//   name            String
-//   weeks           Json
-//   TimeTableItem   TimeTableItem @relation(fields: [timeTableItemId], references: [id])
-//   timeTableItemId Int
-// }
+model Group {
+  id              Int            @default(autoincrement()) @id
+  name            String
+  TimeTableItem   TimeTableItem? @relation(fields: [timeTableItemId], references: [id])
+  timeTableItemId Int?
+}
 // model Week {
 //   id      Int    @default(autoincrement()) @id
 //   week    Int
```



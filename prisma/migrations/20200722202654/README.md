# Migration `20200722202654`

This migration has been generated by RubenZx at 7/22/2020, 8:26:54 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `ucalendar`.`Group` DROP FOREIGN KEY `Group_ibfk_1`

ALTER TABLE `ucalendar`.`Group` DROP COLUMN `timeTableItemId`;

ALTER TABLE `ucalendar`.`TimeTableItem` ADD COLUMN `groupId` int NOT NULL ;

ALTER TABLE `ucalendar`.`TimeTableItem` ADD FOREIGN KEY (`groupId`) REFERENCES `ucalendar`.`Group`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200722201351..20200722202654
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 enum Role {
   ALUMN
@@ -53,9 +53,10 @@
   type         String
   dayOfTheWeek Int
   colorBgc     String
   colorAbrev   String
-  group        Group
+  group        Group               @relation(fields: [groupId], references: [id])
+  groupId      Int
   weeks        Json
   users        UserTimeTableItem[]
   timetables   TimeTableSubject[]
   subject      Subject             @relation(fields: [subjectId], references: [id])
@@ -87,12 +88,11 @@
   @@id([timeTableId, timeTableItemId])
 }
 model Group {
-  id              Int            @default(autoincrement()) @id
-  name            String
-  TimeTableItem   TimeTableItem? @relation(fields: [timeTableItemId], references: [id])
-  timeTableItemId Int?
+  id            Int             @default(autoincrement()) @id
+  name          String
+  TimeTableItem TimeTableItem[]
 }
 // model Week {
 //   id      Int    @default(autoincrement()) @id
```


